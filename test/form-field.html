<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Set of standard web components (Vanilla) based on the Cloudscape Design System.">

    <title>Form Field - Rainforest</title>

    <link href="../rainforest.css" rel="stylesheet">    

  </head>
  <body>

    <rf-form-field>
      <span slot="label">Form field label</span>      
      <span slot="description">This is a description</span>
      <rf-input></rf-input>
    </rf-form-field>
    <br><br>
    <rf-form-field>
      <span slot="label">Form field label <i>- optional</i></span>      
      <span slot="description">This is a description</span>
      <rf-input></rf-input>
    </rf-form-field>
    <br><br>
    <rf-form-field>
      <span slot="label">Form field label</i></span>      
      <span slot="constraint-text">Requirements and constraints for the field.</span>
      <rf-input></rf-input>
    </rf-form-field>
    <br><br>    
    <rf-form-field>
      <span slot="label">Form field label</span>      
      <span slot="description">This is a description</span>
      <span slot="error-text">This is an error message.</span>
      <span slot="constraint-text">Requirements and constraints for the field.</span>      
      <rf-input invalid></rf-input>
    </rf-form-field>
    <br><br>    
    <rf-form-field id="field">
      <span slot="label">Name <i>- optional</i></span>      
      <span id="constraint" slot="constraint-text">The name must have 1 to 10 characters. Character count: 0/10</span>      
      <rf-input id="count"></rf-input>
    </rf-form-field>    
    <br><br>  
    <rf-form-field>
      <span slot="label">Form Field label</span>      
      <span slot="constraint-text">Requirements and constraints for the field.</span>
      <rf-input></rf-input>
    </rf-form-field>
    <br><br>
    <rf-form-field>
      <span slot="label">Security group</span>      
      <rf-button icon-name="refresh" slot="secondary-control"></rf-button>
      <rf-input></rf-input>
    </rf-form-field>
    <br><br>    
    <rf-form-field>
      <span slot="label">Terms and conditions</span>
      <span slot="description">
        Please read through our
        <rf-link
          href="#"
          external="true"
          variant="primary"
          font-size="body-s">
          terms and conditions
        </rf-link>
        and agree.
      </span>
      <rf-checkbox>I agree to the terms and conditions</rf-checkbox>
    </rf-form-field>
    <br>
    <pre>
&lt;rf-box variant="p"&gt;Paragraph text&lt;/rf-box&gt;
&lt;rf-box color="text-body-secondary"&gt;Secondary text&lt;/rf-box&gt;
&lt;rf-box variant="h1"&gt;H1 text&lt;/rf-box&gt;
&lt;rf-box variant="code"&gt;Code&lt;/rf-box&gt;
&lt;rf-box fontsize="display-l" fontweight="bold"&gt;Large bold text&lt;/rf-box&gt;
&lt;rf-box variant="awsui-key-label"&gt;Key label text&lt;/rf-box&gt;
&lt;rf-box textalign="center"&gt;Centered text&lt;/rf-box&gt;
&lt;rf-box float="right"&gt;Float right&lt;/rf-box&gt;
    </pre>

    <script src="../components/button.js" type="module"></script>
    <script src="../components/form-field.js" type="module"></script>
    <script src="../components/input.js" type="module"></script>
    <script src="../components/link.js" type="module"></script>    
    <script src="../components/checkbox.js" type="module"></script>    

    <script>
      let error = null;

      function createError( message ) {
        const element = document.createElement( 'span' );
        element.innerText = message;
        element.slot = 'error';
        return element;
      }

      const constraint = document.querySelector( '#constraint' );      
      const field = document.querySelector( '#field' );
      const input = document.querySelector( '#count' );
      input.addEventListener( 'rf-change', ( evt ) => {
        const count = evt.detail.value.length;

        constraint.innerText = `The name must have 1 to 10 characters. Character count: ${count}/10`;
        input.invalid = count > 10 ? true : false;

        if( count > 10 ) {
          if( error === null ) {
            error = createError( 'The name has too many characters.' );
          }
          field.appendChild( error );
        } else {
          if( error !== null ) {
            error.remove();
            error = null;
          }
        }
      } );
    </script>

  </body>
</html>
